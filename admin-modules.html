<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Cursos — ENTHIVSC STREAM</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<header class="topbar">
  <div class="container topbar__inner">
    <a class="brand brand--link" href="./index.html" style="text-decoration:none;">
      <div class="brand__mark">E</div>
      <div class="brand__text">
        <div class="brand__name">Admin Cursos</div>
        <div class="brand__tag">Criar • Editar • Capa • Ordenar (drag & drop)</div>
      </div>
    </a>

    <div class="topbar__actions">
      <a class="btn btn--ghost" href="./admin.html">Admin</a>
      <a class="btn btn--ghost" href="./index.html">Voltar</a>
      <button id="btnLogoutTop" class="btn btn--ghost" type="button">Sair</button>
    </div>
  </div>
</header>

<main class="container" id="adminCoursesContent" style="display:none;">
  <section class="panel">
    <div class="notice">
      <div class="notice__title">Como funciona</div>
      <div class="notice__text">
        1) Use a lista à esquerda para <strong>ordenar</strong> cursos (arrastar).<br/>
        2) Selecione um curso para <strong>editar</strong> (título, categoria, capa e módulos/aulas).<br/>
        3) Clique em <strong>Salvar</strong>. Isso atualiza o site inteiro (index + curso).
      </div>
    </div>

    <div class="panel__row" style="align-items:flex-start;">
      <div class="field" style="flex:1; min-width:280px;">
        <label class="label">Cursos (arraste para ordenar)</label>
        <div id="courseList" class="panel" style="padding:10px; margin:0;"></div>
        <div class="row" style="margin-top:10px;">
          <button id="btnSaveOrder" class="btn btn--ghost" type="button">Salvar ordem</button>
          <button id="btnReload" class="btn btn--ghost" type="button">Recarregar</button>
        </div>
      </div>

      <div class="field" style="flex:2; min-width:320px;">
        <label class="label">Editor do curso</label>

        <div class="panel" style="margin:0;">
          <div class="panel__row">
            <div class="field field--grow">
              <label class="label" for="courseId">course_id</label>
              <input id="courseId" class="input" placeholder="ex: curso_revit" />
            </div>
            <div class="field">
              <label class="label">&nbsp;</label>
              <button id="btnNew" class="btn btn--ghost" type="button">Novo</button>
            </div>
          </div>

          <div class="panel__row">
            <div class="field field--grow">
              <label class="label" for="title">Título</label>
              <input id="title" class="input" placeholder="Nome do curso" />
            </div>
            <div class="field field--grow">
              <label class="label" for="category">Categoria</label>
              <input id="category" class="input" placeholder="Engenharia / Arquitetura / ..." />
            </div>
          </div>

          <div class="panel__row">
            <div class="field field--grow">
              <label class="label" for="subtitle">Subtítulo</label>
              <input id="subtitle" class="input" placeholder="Descrição curta" />
            </div>
          </div>

          <div class="divider"></div>

          <div class="panel__row">
            <div class="field field--grow">
              <label class="label" for="coverUrl">Capa (URL)</label>
              <input id="coverUrl" class="input" type="url" placeholder="https://.../capa.jpg" />
            </div>
            <div class="field">
              <label class="label" for="coverFile">Upload capa</label>
              <input id="coverFile" class="input" type="file" accept="image/*" />
            </div>
            <div class="field">
              <label class="label">&nbsp;</label>
              <button id="btnUploadCover" class="btn btn--ghost" type="button">Enviar capa</button>
            </div>
          </div>

          <div class="divider"></div>

          <div class="field">
            <label class="label" for="modulesJson">Módulos/Aulas (JSON)</label>
            <textarea id="modulesJson" class="input" style="height:320px; padding:10px; font-family:ui-monospace,Consolas,monospace;" placeholder='[{"title":"Módulo 1","lessons":[{"lesson_id":"curso__m1__a1","title":"Aula 1","telegram_url":"https://t.me/..."}]}]'></textarea>
            <div class="help">Dica: mantenha lesson_id único. O site usa isso para progresso, comentários e assistidos.</div>
          </div>

          <div class="row" style="margin-top:10px;">
            <button id="btnSave" class="btn" type="button">Salvar</button>
            <button id="btnDelete" class="btn btn--danger" type="button">Excluir</button>
          </div>
        </div>
      </div>
    </div>

    <pre class="console" id="console"></pre>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./supabase-config.js"></script>
<script src="./theme.js"></script>
<script src="./presence.js"></script>
<script src="./app.js"></script>
<script src="./admin-modules.js"></script>
</body>
</html>
